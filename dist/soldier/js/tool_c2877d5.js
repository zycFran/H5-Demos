var Base={openid:"openid1",password:"csj150kg"},API_BASE="/r/",AjaxFunc={getAction:function(e){if(e.data)for(var t in e.data)e.url+="&"+t+"="+e.data[t];e.alertFalse=e.alertFalse||"yes";var n={url:e.url,type:"GET",contentType:"application/json",dataType:"json",success:function(t){t&&(t.success||t.message&&"yes"==e.alertFalse&&X.dialog.tips(t.message),e.callback&&e.callback(t))}};$.ajax(n)},saveAction:function(e){e.alertFalse=e.alertFalse||"yes";var t={url:e.url,type:e.method||"POST",data:JSON.stringify(e.data),contentType:"application/json",dataType:"json",success:function(t){t&&(t.success||t.message&&"yes"==e.alertFalse&&X.dialog.tips(t.message),e.callback&&e.callback(t))}};$.ajax(t)}},UtilFunc={getQueryString:function(){for(var e=location.search.match(new RegExp("[?&][^?&]+=[^?&]+","g")),t=0;t<e.length;t++)e[t]=e[t].substring(1);return e},getQueryStringByName:function(e){var t=location.search.match(new RegExp("[?&]"+e+"=([^&]+)","i"));return null==t||t.length<1?"":t[1]},setCookie:function(e,t,n,i,a,s){var o=new Date,n=arguments[2]?arguments[2]:604800;o.setTime(o.getTime()+1e3*n),document.cookie=escape(e)+"="+escape(t)+(o?";expires="+o.toGMTString():"")+(i?";path="+i:"/")+(a?";domain="+a:"")+(s?";secure":"")},getCookie:function(e){var t=document.cookie.indexOf(e),n=document.cookie.indexOf(";",t);return-1==t?"":unescape(document.cookie.substring(t+e.length+1,n>t?n:document.cookie.length))},delCookie:function(e,t){var t=arguments[1]?arguments[1]:null,n=new Date;n.setTime(n.getTime()-1);var i=this.getCookie(e);null!=i&&(document.cookie=e+"="+t+";expires="+n.toGMTString())},isIE:function(e){var t=document.createElement("b");return t.innerHTML="<!--[if IE "+e+"]><i></i><![endif]-->",1===t.getElementsByTagName("i").length},is_weixin:function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)?!0:!1},initApiUrl:function(e){if(!UtilFunc.is_weixin())for(var t in e)e[t].indexOf("?")<0&&(e[t]+="?_dt="+Math.random()),e[t]=e[t]+"&openid="+Base.openid+"&password="+Base.password}},X={};X.dialog={dbs:[],open:function(e,t){t=$.init(t,{topic:"",width:280,notify:null});var n=this,i=t.width,a=X.zi(),s=X.zi(),o=[s,i],c=X.ps(),r=c.width,d=c.height,l=$.round((r-i)/2),u=-60,g=new Text;10>l&&(l=10),e&&g._($.replace(e,"#di#",s)),o[3]=$.ce("div"),o[3].addClass("db-bg"),o[3].css("zIndex",a),o[3].attr("id","dialog-bg-"+s),o[4]=$.ce("div"),o[4].addClass("db-wrap"),o[4].css("zIndex",s),o[4].css("width",i+"px"),o[4].css("left",l+"px"),o[4].attr("id","dialog-"+s),o[4].html(g.ts()),o[5]=t.notify,X.body.append(o[3],o[4]),o[2]=o[4].height(),u=$.round((d-o[2])/2+u),10>u&&(u=10),o[4].css("top",u+"px"),o[4].show(),n.dbs.push(o)},alert:function(e,t){t=$.init(t,{title:"",msg:e,width:280,btn:"确定"}),t.width<180&&(t.width=180);var n=this,i=new Text;t.title&&i._('<div class="db-title">')._(t.title)._("</div>"),i._('<div class="db-content">')._(e)._("</div>"),i._('<div class="db-foot">'),t.cfm&&n.addBtn(i,t.btn1,2),t.ensure?n.addBtn(i,t.btn,1):n.addBtn(i,t.btn,0),i._("</div>"),n.open(i.ts(),t)},confirm:function(e,t){t=$.init(t,{ensure:!0,msg:e,btn1:"取消"}),t.cfm=!0,this.alert(e,t)},tips:function(e,t){clearTimeout(window.tipsTimer);var n=$('<div class="db-tip">'+e+"</div>");$("body").append(n),window.tipsTimer=setTimeout(function(){$(".db-tip").remove(),t&&t()},2e3)},addBtn:function(e,t,n){this.addButton(e,{id:"dialog-btn-#di#",name:t,click:"X.dialog.close(#di#,"+n+");"})},addButton:function(e,t){e._("<p"),t.id&&e._(' id="')._(t.id)._('"'),t.css&&e._(' class="')._(t.css)._('"'),t.style&&e._(' style="')._(t.style)._('"'),t.click&&e._(' onclick="')._(t.click)._('"'),e._(">"+t.name+"</p>")},notify:function(e,t){var n=this.get(e);n[5]&&n[5]($.no(t)?0:t)},close:function(e,t){var n,i=this;if($.no(t)&&(t=0),!$.no(e)){if(n=i.get(e),!n)return;$.isN(e)&&(n[5]?0!=t?(n[5](t),i.get(e,!0),n[4].remove(),n[3].remove()):n[5](t,function(){i.get(e,!0),n[4].remove(),n[3].remove()}):(i.get(e,!0),n[4].remove(),n[3].remove()))}},get:function(e,t){for(var n,i=this,a=i.dbs,s=0;s<a.length;s++)if(a[s][0]==e){n=a[s],t&&a.splice(s,1);break}return n}},X.valid={isMobile:function(e){return e&&/^1[3|5|8|7][0-9]\d{8}$/.test(e)},isEmail:function(e){return e&&/^[0-9a-zA-Z_\-]+@[0-9a-zA-Z_\-]+\.\w{1,5}(\.\w{1,5})?$/.test(e)},isBankCard:function(e){return e&&/^\d{16,30}$/.test(e)}},function(e,t){var n=e.documentElement,i="orientationchange"in window?"orientationchange":"resize",a=function(){var e=n.clientWidth;e&&(n.style.fontSize=100*(e/320)+"px")};e.addEventListener&&(t.addEventListener(i,a,!1),e.addEventListener("DOMContentLoaded",a,!1))}(document,window);